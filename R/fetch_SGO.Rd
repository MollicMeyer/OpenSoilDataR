% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_SGO.R
\name{fetch_SGO}
\alias{fetch_SGO}
\title{Fetch Soil Property Data from Soil Data Access SSURGO (SGO)}
\usage{
fetch_SGO(
  aoi,
  properties,
  depths = list(c(0, 5), c(5, 15), c(15, 30), c(30, 60), c(60, 100), c(100, 200)),
  method = "Dominant Component (Numeric)",
  tosoc = FALSE,
  crs = "EPSG:4326",
  res = 30,
  db = "gssurgo",
  export = FALSE,
  output_dir = NULL,
  suffix = ""
)
}
\arguments{
\item{aoi}{A \code{SpatRaster}, \code{SpatVector}, or shapefile path representing the area of interest.}

\item{properties}{Character vector. Horizon-level property names (e.g. \code{"cec7_r"}, \code{"claytotal_r"}, \code{"om_r"}).}

\item{depths}{A list of numeric depth intervals (e.g., \code{list(c(0,5), c(5,15))}).}

\item{method}{Character. Method to use: \code{"Dominant Component (Numeric)"} (default), \code{"Weighted Average"}, or \code{"Min/Max"}.}

\item{tosoc}{Logical. If \code{TRUE}, converts \code{"om_r"} to \code{"oc_r"} using the Van Bemmelen factor (1.724).}

\item{crs}{Character. CRS for raster output. Default is \code{"EPSG:4326"}.}

\item{res}{Numeric. Raster resolution in meters. Default is \code{30}.}

\item{db}{Character. SDA raster database to query: \code{"gssurgo"} (default), \code{"gnatsgo"}, \code{"RSS"}, or \code{"statsgo"}.}

\item{export}{Logical. If \code{TRUE}, saves GeoTIFFs to disk.}

\item{output_dir}{Character. Directory to save exported files (required if \code{export = TRUE}).}

\item{suffix}{Optional character string to append to output filenames.}
}
\value{
A list with:
\itemize{
\item \code{stack}: SpatRaster of queried layers
\item \code{file_paths}: Vector of written file paths (if \code{export = TRUE})
\item \code{mukey_raster}: The original mukey raster (SpatRaster)
}
}
\description{
Downloads soil property data from the USDA-NRCS Soil Data Access (SDA) service.
Supports only \strong{horizon-level} (depth-dependent) properties. Uses \code{mukey.wcs()} to
retrieve mapunit raster and joins queried soil property values to raster via \code{mukey}.
}
\section{Horizon-Level Properties (Require Depth)}{

\tabular{ll}{
\strong{Property} \tab \strong{Column} \cr
Available Water Capacity \tab awc_r \cr
Bulk Density (0.1 bar) \tab dbtenthbar_r \cr
Bulk Density (Oven Dry) \tab dbovendry_r \cr
Calcium Carbonate \tab caco3_r \cr
Cation Exchange Capacity \tab cec7_r \cr
Coarse Sand \tab sandco_r \cr
Electrical Conductivity \tab ec_r \cr
Gypsum \tab gypsum_r \cr
Organic Matter \tab om_r \cr
pH (1:1 H2O) \tab ph1to1h2o_r \cr
Saturated Hydraulic Conductivity \tab ksat_r \cr
Total Clay \tab claytotal_r \cr
Total Sand \tab sandtotal_r \cr
Total Silt \tab silttotal_r \cr
And more (see SDA documentation) \tab ...
}

\examples{
\dontrun{
aoi <- rast("your_dem.tif")
sgo <- fetch_SGO(
  aoi = aoi,
  properties = c("ph1to1h2o_r", "cec7_r", "om_r"),
  depths = list(c(0,5), c(5,15)),
  method = "Dominant Component (Numeric)",
  tosoc = TRUE,
  crs = "EPSG:4326",
  res = 30,
  db = "gssurgo",
  export = TRUE,
  output_dir = "SGO_outputs",
  suffix = "example"
)
}
}
