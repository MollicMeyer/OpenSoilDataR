% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_PSP.R
\name{fetch_PSP}
\alias{fetch_PSP}
\title{Download and Process POLARIS Soil Data}
\usage{
fetch_PSP(
  aoi,
  properties,
  depths,
  output_dir,
  suffix = "",
  crs = "EPSG:4326",
  scale = 30,
  export = TRUE,
  tosoc = FALSE,
  convertOM = FALSE
)
}
\arguments{
\item{aoi}{SpatRaster, SpatVector, or file path to a shapefile. The area of interest.}

\item{properties}{Character vector. List of soil properties to download (e.g., `"bd_mean"`, `"clay_mean"`, `"om_mean"`).}

\item{depths}{Character vector. Depth intervals to download (e.g., `"0_5"`, `"5_15"`).}

\item{output_dir}{Character. Directory where files will be saved. Set to `NULL` to keep only in memory.}

\item{suffix}{Character. Optional suffix for file names.}

\item{crs}{Character. Coordinate reference system for the output. Default is `"EPSG:4326"`.}

\item{scale}{Numeric. Resolution in meters. Default is `30`.}

\item{export}{Logical. If `TRUE`, saves downloaded rasters to `output_dir`. Default is `TRUE`.}

\item{tosoc}{Logical. If `TRUE`, converts Organic Matter (`om_mean`) to Soil Organic Carbon (SOC) using the Van Bemmelen factor (1.724).}

\item{convertOM}{Logical. If `TRUE`, converts Organic Matter (`om_mean`) from log10 to percentage. Default is `FALSE`.}
}
\value{
A list with the following elements:
\describe{
  \item{\code{stack}}{A `SpatRaster` containing all downloaded layers.}
  \item{\code{file_paths}}{A character vector of file paths (if `export = TRUE`).}
  \item{\code{product}}{A character string `"PSP"` identifying the dataset.}
}
}
\description{
Downloads specified POLARIS soil property data from Google Earth Engine (GEE),
loads the rasters into memory, and optionally saves them to disk.
}
\details{
This function interfaces with the POLARIS soil dataset on Google Earth Engine (GEE),
allowing users to extract soil property maps for a specified area of interest (AOI).
Users can optionally apply transformations to Organic Matter (OM) and Soil Organic Carbon (SOC).
}
\examples{
\dontrun{
# Authenticate and initialize Google Earth Engine
gd_authenticate(auth_mode = "notebook")
gd_initialize()

# Define AOI and output directory
output_directory <- "path/to/your/directory"
aoi_raster <- rast("path_to_aoi.tif")

# Fetch POLARIS data (without OM to SOC conversion)
psp_data <- fetch_PSP(
  aoi = aoi_raster,
  properties = c("bd_mean", "clay_mean"),
  depths = c("0_5", "30_60"),
  output_dir = output_directory,
  suffix = "kit",
  crs = "EPSG:4326",
  scale = 30,
  export = TRUE,
  convertOM = FALSE,
  tosoc = FALSE
)

# Fetch POLARIS data with OM converted to percentage
psp_data_om <- fetch_PSP(
  aoi = aoi_raster,
  properties = c("om_mean", "clay_mean"),
  depths = c("0_5", "30_60"),
  output_dir = output_directory,
  suffix = "kit",
  crs = "EPSG:4326",
  scale = 30,
  export = TRUE,
  convertOM = TRUE,
  tosoc = FALSE
)

# Fetch POLARIS data with OM converted to SOC
psp_data_soc <- fetch_PSP(
  aoi = aoi_raster,
  properties = c("om_mean", "clay_mean"),
  depths = c("0_5", "30_60"),
  output_dir = output_directory,
  suffix = "kit",
  crs = "EPSG:4326",
  scale = 30,
  export = TRUE,
  convertOM = TRUE,
  tosoc = TRUE
)

# Access the loaded SpatRaster
plot(psp_data$stack)
}
}
